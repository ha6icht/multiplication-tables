<!DOCTYPE html>
<html lang="en">
<head>
    <title>Multiplication Table</title>
    <style>
        td {
            border: 1px solid black;
            padding: 5px;
        }
    </style>
</head>
<body>
    <h1>Multiplication Table</h1>
    <form id="multiplication-form">
        <label class="form-heading">Choose Serie:</label>
        <br>
        <label for="choose-serie1">All</label>
        <input id="choose-serie1" type="checkbox" value="1" onclick="checkAll()">
        <label for="choose-serie2">2</label>
        <input id="choose-serie2" type="checkbox" value="2" onclick="uncheckAll()">
        <label for="choose-serie3">3</label>
        <input id="choose-serie3" type="checkbox" value="3" onclick="uncheckAll()">
        <label for="choose-serie3">4</label>
        <input id="choose-serie4" type="checkbox" value="4" onclick="uncheckAll()">
        <label for="choose-serie4">5</label>
        <input id="choose-serie5" type="checkbox" value="5" onclick="uncheckAll()">
        <label for="choose-serie6">6</label>
        <input id="choose-serie6" type="checkbox" value="6" onclick="uncheckAll()">
        <label for="choose-serie7">7</label>
        <input id="choose-serie7" type="checkbox" value="7" onclick="uncheckAll()">
        <label for="choose-serie8">8</label>
        <input id="choose-serie8" type="checkbox" value="8" onclick="uncheckAll()">
        <label for="choose-serie9">9</label>
        <input id="choose-serie9" type="checkbox" value="9" onclick="uncheckAll()">
        <label for="choose-serie10">10</label>
        <input id="choose-serie10" type="checkbox" value="10" onclick="uncheckAll()">
        <label for="choose-serie11">11</label>
        <input id="choose-serie11" type="checkbox" value="11" onclick="uncheckAll()">
        <label for="choose-serie12">12</label>
        <input id="choose-serie12" type="checkbox" value="12" onclick="uncheckAll()">
        <br>
        <label class="form-heading">Terms per Serie:</label>
        <br>
        <label for="choose-term10">10</label>
        <input id="choose-term10" type="checkbox" value="13" checked onclick="checkTerms(10)">
        <label for="choose-term12">12</label>
        <input id="choose-term12" type="checkbox" value="14" onclick="checkTerms(12)">
    </form>
    <button onclick="getValue()">Create Table</button>
    <p id="output"></p>
    <table id="multiplication-table"></table>
    <script>
        let checkSerie;
        let checkView = false;
        let checkTable = false;
        let howManyTerms = true;
        const multiplicationForm = document.getElementById("multiplication-form");
        const multiplicationTable = document.getElementById("multiplication-table");
        function checkAll(){
            console.log("OK");
            
            const serieNumber = multiplicationForm.elements[0].value;
            const allChecked = multiplicationForm.elements[0].checked;
            
            console.log(allChecked);
            
            for(let i=0;i<11;i++){
                if(serieNumber == 1 && allChecked) multiplicationForm.elements[i+1].checked = true;
                else if(serieNumber == 1 && !allChecked) multiplicationForm.elements[i+1].checked = false;   
            }
            //if(isChecked11 == 11) multiplicationForm.elements[0].checked = true;
        }
        function uncheckAll(){
            let isChecked11 = 0
            for(let i=0;i<11;i++){
                if(multiplicationForm.elements[i+1].checked) isChecked11++;
                console.log("isChecked11: "+isChecked11);
            }
            if(multiplicationForm.elements[0].checked) multiplicationForm.elements[0].checked = false;
            if(isChecked11 == 11) multiplicationForm.elements[0].checked = true;
        }
        function checkTerms(numberOfTerms){
            let isChecked;
            if(numberOfTerms == 10) howManyTerms = true;
            else howManyTerms = false;
            for(let i=12;i<14;i++){
                isChecked = multiplicationForm.elements[i].checked;
                console.log(isChecked+" "+i);
                if(i<13 && isChecked && numberOfTerms == 12) multiplicationForm.elements[i].checked = false;
                else if(i>12 && isChecked && numberOfTerms == 10) multiplicationForm.elements[i].checked = false;
            }
        }
        function getValue(){
            let formValue, formTerms;
            let checkValue = 1;
            checkSerie = 0;
            for(let i=12;i<14;i++){
                if(multiplicationForm.elements[i].checked) formTerms = multiplicationForm.elements[i].value;
            }
            setTable(1, formTerms);
            for(let j=0;j<11;j++){
                const isSerieChecked = multiplicationForm.elements[j+1].checked;
                if(isSerieChecked){
                    formValue = multiplicationForm.elements[j+1].value;    
                    setTable(formValue, formTerms);
                    checkValue++;
                    if(checkValue == formValue || multiplicationForm.elements[11].checked){
                        checkSerie++;
                        //checkValue--;
                        if(formValue > 10){
                            checkSerie = checkSerie - 2;
                        }
                        console.log("checkSerie++: "+checkSerie);
                        checkValue = formValue;
                    }
                    console.log("checkValue: "+checkValue);
                }
                console.log(isSerieChecked+" "+formValue);    
            }
            console.log("checkSerie: "+checkSerie)
            if(checkSerie < 9 && !multiplicationForm.elements[0].checked) removeTable();
            else if(checkSerie == 9 && !howManyTerms) removeTable();
            else if(checkSerie == 7 && howManyTerms) removeTable();
            checkView = true;
        }
        function setTable(formValue, formTerms){
            let nodeTR, howManyRows, howManyCols;
            let serieNumber = 1;
            if(checkView){
                while(multiplicationTable.hasChildNodes() || checkTable){
                    removeTable();
                }
                checkView = false;
            }
            if(formValue>=1 && formValue <=12) howManyRows = 1;
            else howManyRows = 12;
            if(formTerms == 13) howManyCols = 10;
            else howManyCols = 12;
            for(let i=0;i<howManyRows;i++){
                console.log(i);
                nodeTR = document.createElement("TR");
                //nodeTR.setAttribute("class", "multiplication");
                if(formValue == 13 || formValue == 14) serieNumber = i+1;
                else serieNumber = formValue;
                for(let j=0;j<howManyCols;j++){
                    const nodeTD = document.createElement("TD");
                    const textnode = document.createTextNode((j+1)+" x "+serieNumber);
                    nodeTD.appendChild(textnode);
                    nodeTR.appendChild(nodeTD);
                }
                document.getElementById("multiplication-table").appendChild(nodeTR);
            }
        }
        function removeTable(){
            multiplicationTable.removeChild(multiplicationTable.firstChild);
        }
    </script>
</body>
</html>
